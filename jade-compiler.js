// Generated by CoffeeScript 1.6.3
var compiler, fs, jade,
  __slice = [].slice;

fs = require('fs');

jade = require('jade');

module.exports = compiler = {
  fromSource: function() {
    var callback, err, opts, src, _i;
    src = arguments[0], opts = 3 <= arguments.length ? __slice.call(arguments, 1, _i = arguments.length - 1) : (_i = 1, []), callback = arguments[_i++];
    opts = opts[0] || {};
    opts.filename = opts.filename || 'jade-compiler';
    try {
      return callback(null, jade.render(src, opts));
    } catch (_error) {
      err = _error;
      return callback(err);
    }
  },
  fromFile: function() {
    var callback, filepath, opts, _i;
    filepath = arguments[0], opts = 3 <= arguments.length ? __slice.call(arguments, 1, _i = arguments.length - 1) : (_i = 1, []), callback = arguments[_i++];
    opts = opts[0] || {};
    if (opts.filename == null) {
      opts.filename = filepath;
    }
    return fs.readFile(filepath, 'utf8', function(err, src) {
      if (err != null) {
        return callback(err);
      }
      return compiler.fromSource(src, opts, callback);
    });
  }
};
